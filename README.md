# KAROI Backend
> KAORIï¼Œè®“é¦™æ°£é™ªä¼´ä½ çš„æ¯ä¸€å€‹é‡è¦æ™‚åˆ»


## å°ˆæ¡ˆä»‹ç´¹
å—¨ï¼Œæ­¡è¿ä¾†åˆ° Kaoriï¼æˆ‘å€‘æ˜¯ä¸€å€‹ç†±æ„›é¦™æ°´çš„äº’å‹•å¹³å°ï¼Œæ—¨åœ¨åˆ†äº«æœ€æ–°çš„é¦™æ°´æ¶ˆæ¯å’ŒçŸ¥è­˜ã€‚æˆ‘å€‘å¸Œæœ›èƒ½é€éç§‘å­¸åŒ–çš„æ–¹å¼åˆ†ææ¯ä¸€æ¬¾é¦™æ°´çš„çµ„æˆå…ƒç´ åŠè¡¨ç¾ï¼Œå¹«åŠ©å¤§å®¶æ›´è¿…é€Ÿçš„æŒæ¡è‡ªå·±å–œæ„›çš„å‘³é“è·Ÿå…ƒç´ çš„é—œè¯ã€‚

åŒæ™‚ä¹Ÿè¨­æœ‰è¨è«–å€ï¼Œæ»¿è¶³å¤§å®¶æƒ³èˆ‡å…¶ä»–é¦™æ°´æ„›å¥½è€…è¨è«–å’Œåˆ†äº«é«”é©—çš„æ…¾æœ›ã€‚æˆ‘å€‘å¸Œæœ›èƒ½å¤ æä¾›æœ€å®Œå–„çš„é¦™æ°´è³‡è¨Šï¼Œå”åŠ©å¤§å®¶æ‰¾åˆ°æœ€é©åˆçš„é¦™æ°´ã€å±•ç¾å„è‡ªç¨ç‰¹çš„é¢¨æ ¼ã€‚

å‰ç«¯æ¡ç”¨ React é–‹ç™¼ï¼Œä¸¦éƒ¨ç½²åœ¨ Netlifyã€‚

å¾Œç«¯æ¡ç”¨ Expressã€Sequelize é–‹ç™¼ï¼Œéƒ¨ç½²åœ¨ herokuï¼Œä¸¦ä½¿ç”¨ clearDB æ”¯æ´ MySQL è³‡æ–™åº«ã€‚

---
## ä¸»è¦åŠŸèƒ½

- æœƒå“¡ç³»çµ±
    - ç™»å…¥ã€è¨»å†Šã€ç™»å‡º
- ç•™è¨€ç³»çµ±
    - æœƒå“¡ï¼šæ–°å¢ã€ç·¨è¼¯ã€åˆªé™¤
    - ç®¡ç†å“¡ï¼šå¯å¼·åˆ¶éš±è—æœƒå“¡çš„ç•™è¨€
- æŠ•ç¥¨ç³»çµ±
    - æœƒå“¡ï¼šæ¯æ¬¾é¦™æ°´çš†å¯å¤šæ¬¡æŠ•ç¥¨ ( ä¿®æ­£æŠ•ç¥¨å…§å®¹ )
- é¦™æ°´è³‡æ–™ç³»çµ±
    - é¦™æ°´åŸºæœ¬è³‡æ–™ã€çœ¾äººæŠ•ç¥¨çµæœã€ç›¸é—œè©•è«–
- æœå°‹ç³»çµ±
    - æ ¹æ“šé¦™æ°´åç¨±ã€å“ç‰Œåç¨±ã€èª¿é¦™å¸«æœå°‹é¦™æ°´åˆ—è¡¨

---
## ä½¿ç”¨æŠ€è¡“
- Express â†’ å¾Œç«¯æ¡†æ¶
- mysql2 â†’ è³‡æ–™åº«
- Sequelize â†’ æ“ä½œ mySQL
- bcrypt  â†’ é›œæ¹Šé‹ç®—(è™•ç†å¯†ç¢¼åŠ å¯†éƒ¨åˆ†)
- cors â†’ è™•ç†è·¨ç¶²åŸŸå•é¡Œ
- express-session â†’ è¨­ç½® session å¯¦ä½œç™»é™¸æ©Ÿåˆ¶
- dotenv â†’ å”åŠ©è¨­ç½®ç’°å¢ƒè®Šæ•¸

---
## å¦‚ä½•åœ¨æœ¬åœ°ç«¯åŸ·è¡Œ
1. æœ¬åœ°éœ€è¦æœ‰ git, node, SQL ç’°å¢ƒ ( å¯ç”¨ xampp ) 
2. å°‡æœ¬é çš„å…§å®¹ clone åˆ°æœ¬åœ°ç«¯
3. åŸ·è¡Œ `npm install` å®‰è£æ­¤å°ˆæ¡ˆæ‰€éœ€ä¹‹å¥—ä»¶
4. æ–°å¢ config/config.jsonï¼Œæ ¼å¼ç‚ºï¼š
    
    ```jsx
    // è«‹æŠŠå…§å®¹æ”¹æˆè‡ªå·±çš„
    
    {
      "development": {
        "username": "",
        "password": "",
        "database": "",
        "host": "localhost",
        "dialect": "mysql"
      },
      "test": {
        "username": "",
        "password": "",
        "database": "",
        "host": "localhost",
        "dialect": "mysql"
      },
      "production": {
        "username": "",
        "password": "",
        "database": "",
        "host": "localhost",
        "dialect": "mysql",
      }
    }
    ```
    
5. ä¿®æ”¹ .env.example æª”åæ”¹æˆ .env ä¸¦å¡«å…¥å…§å®¹
    
    ```jsx
    // ä»¥ä¸‹çš„å€¼éœ€è¦æ”¾åœ¨å–®å¼•è™Ÿå…§
    // ä¾‹å¦‚: SALT_ROUNDS = '0'
    
    SALT_ROUNDS = '' // å¡«å…¥æ•¸å­—
    SESSION_SECRET = '' // å¡«å…¥å­—ä¸²
    
    ```
6. åŸ·è¡ŒÂ `npx sequelize-cli db:migrate`Â å»ºç«‹è³‡æ–™åº«
7. åƒè€ƒ seeder ç¤ºç¯„è³‡æ–™ å‰µå»º seeder è³‡æ–™
8. åŸ·è¡ŒÂ `npx sequelize-cli db:seed:all`Â æŠŠè³‡æ–™æ¤å…¥è³‡æ–™åº«å…§
    - ç›¸é—œæ“ä½œé †åºï¼Œå¯åƒè€ƒ [ sequlize-cli æ–‡ä»¶é—œæ–¼ seeder çš„éƒ¨åˆ†](https://sequelize.org/docs/v6/other-topics/migrations/#creating-the-first-seed)
9. åŸ·è¡Œä»£ç¢¼ `node index.js`  è·‘èµ·ä¾† 
    
    ( æ³¨æ„ï¼šè‹¥åœ¨æœ¬åœ°ç«¯åŸ·è¡Œï¼Œè¦è¨˜å¾—æ‰“é–‹è‡ªå·±çš„ DB ä¼ºæœå™¨ï¼Œä»¥ Xampp ç‚ºä¾‹ï¼Œéœ€é‹è¡Œ ï¼­ySQL åŠ Apache å…©é …æœå‹™ )

---

## è³‡æ–™å¤¾çµæ§‹

```jsx
ğŸ“¦ folder
 â”£ ğŸ“‚config
 â”ƒ â”— ğŸ“œconfig.json
 â”£ ğŸ“‚controllers
 â”ƒ â”£ ğŸ“œbrand.js
 â”ƒ â”£ ğŸ“œcomment.js
 â”ƒ â”£ ğŸ“œcreator.js
 â”ƒ â”£ ğŸ“œperfume.js
 â”ƒ â”£ ğŸ“œuser.js
 â”ƒ â”— ğŸ“œvote.js
 â”£ ğŸ“‚middlewares
 â”ƒ â”£ ğŸ“œauthority.js
 â”ƒ â”— ğŸ“œutils.js
 â”£ ğŸ“‚migrations
 â”ƒ â”£ ğŸ“œ20220906110741-create-user.js
 â”ƒ â”£ ğŸ“œ20220906113850-create-comment.js
 â”ƒ â”£ ğŸ“œ20220906114240-create-perfume.js
 â”ƒ â”£ ğŸ“œ20220906114409-create-brand.js
 â”ƒ â”£ ğŸ“œ20220906114619-create-creator.js
 â”ƒ â”£ ğŸ“œ20220906153207-add-associations.js
 â”ƒ â”£ ğŸ“œ20220922220847-create-vote.js
 â”ƒ â”— ğŸ“œ20220922222859-migration_update-association.js
 â”£ ğŸ“‚models
 â”ƒ â”£ ğŸ“œbrand.js
 â”ƒ â”£ ğŸ“œcomment.js
 â”ƒ â”£ ğŸ“œcreator.js
 â”ƒ â”£ ğŸ“œindex.js
 â”ƒ â”£ ğŸ“œperfume.js
 â”ƒ â”£ ğŸ“œuser.js
 â”ƒ â”— ğŸ“œvote.js
 â”£ ğŸ“‚seeders
 â”£ ğŸ“œ.gitignore
 â”£ ğŸ“œexample.env  // é€™é‚Šè¨˜å¾—æŠŠæª”åæ”¹æˆ .env
 â”— ğŸ“œindex.js
```